{% extends 'mediaapp/base.html' %}

{% block title %}Dashboard — Picha Yangu{% endblock %}

{% block content %}
<div class="animate__animated animate__fadeIn">
<div class="mb-5 rounded-5 overflow-hidden bg-hero position-relative shadow-lg animate__animated animate__slideInDown" style="background-image: url('/attached_assets/stock_images/cinematic_photograph_701e1522.jpg');">
  <div class="position-absolute top-0 start-0 w-100 h-100 overlay-dark" style="background: linear-gradient(90deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.2) 100%);"></div>
  <div class="p-5 position-relative z-1 text-white">
    <h1 class="fw-bold mb-1 animate__animated animate__fadeInLeft animate__delay-1s">Welcome back</h1>
    <p class="opacity-75 animate__animated animate__fadeInLeft animate__delay-1s">Here's what's happening with your media projects today.</p>
  </div>
</div>

<div class="row g-4">
  <div class="col-md-3">
    <div class="card h-100 border-0 shadow-sm" style="background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-2">Clients</span>
        </div>
        <h2 class="fw-bold mb-1">{{ clients_count }}</h2>
        <p class="text-muted small mb-3">Total active clients</p>
        <a href="/clients/" class="text-decoration-none fw-semibold small">View all →</a>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="badge bg-success bg-opacity-10 text-success rounded-pill px-3 py-2">Projects</span>
        </div>
        <h2 class="fw-bold mb-1">{{ projects_count }}</h2>
        <p class="text-muted small mb-3">Managed projects</p>
        <a href="/projects/" class="text-decoration-none fw-semibold small">Manage →</a>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="badge bg-info bg-opacity-10 text-info rounded-pill px-3 py-2">Media</span>
        </div>
        <h2 class="fw-bold mb-1">{{ media_count }}</h2>
        <p class="text-muted small mb-3">Uploaded files</p>
        <a href="/media/" class="text-decoration-none fw-semibold small">Browse →</a>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="badge bg-warning bg-opacity-10 text-warning rounded-pill px-3 py-2">Recovery</span>
        </div>
        <h2 class="fw-bold mb-1">{{ deleted_count }}</h2>
        <p class="text-muted small mb-3">Files in vault</p>
        <a href="/recovery/" class="text-decoration-none fw-semibold small">Open vault →</a>
      </div>
    </div>
  </div>
</div>

<div class="mt-5 pt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold m-0">Recent Clients</h3>
    <a href="/clients/new/" class="btn btn-primary btn-sm px-4">Add Client</a>
  </div>
  
  {% if recent_clients %}
    <div class="row g-4">
      {% for client in recent_clients %}
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body p-4">
              <div class="avatar-placeholder mb-3 d-flex align-items-center justify-content-center bg-light rounded-circle" style="width: 48px; height: 48px;">
                <span class="fw-bold text-secondary">{{ client.name|slice:":1"|upper }}</span>
              </div>
              <h5 class="fw-bold mb-1">{{ client.name }}</h5>
              <p class="text-muted small mb-4">{{ client.projects.count }} active project{{ client.projects.count|pluralize }}</p>
              <a href="/clients/{{ client.id }}/" class="btn btn-outline-primary w-100 py-2">View Profile</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center py-5 bg-white rounded-4 border border-dashed">
      <p class="text-muted mb-0">No clients yet. Start by <a href="/clients/new/" class="fw-semibold">creating your first client</a>.</p>
    </div>
  {% endif %}
</div>
{% endblock %}
